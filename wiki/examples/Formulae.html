<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- Generated with Dibrawi, BraceTax, Sebib, and some more hacks -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style type="text/css">
.content body {
   color: #070707;
   background-color: #f8f8f8;
}
.content  {
   color: #070707;
   background-color: #f8f8f8;
}
.content a:link {
   color: #308721;
}
.content a:visited {
   color: #07330A;
}
.content a:hover {
   background-color: #EFDFC7;
}
.content tt {
   color: #6F3F27;
}.content pre {
   color: #6F3F27;
}.content code {
   color: #6F3F27;
}
.content .dbwmixcode {
   background-color: #ddd;
}
.content div.figure:after {
   color: #308721;
}.content caption.tablefigure:after {
   color: #308721;
}
body {
   color: #f8f8f8;
   background-color: #07330A;
}
 {
   color: #f8f8f8;
   background-color: #07330A;
}
a:link {
   color: #66BBF4;
}
a:visited {
   color: #6A96B3;
}
a:hover {
   background-color: #6F3F27;
}
tt {
   color: #EFDFC7;
}pre {
   color: #EFDFC7;
}code {
   color: #EFDFC7;
}
.dbwmixcode {
   background-color: #ddd;
}
div.figure:after {
   color: #66BBF4;
}caption.tablefigure:after {
   color: #66BBF4;
}
body {
   font-family: sans-serif;
   text-align: none;
   font-size: 70%;

}
 {
   font-family: sans-serif;
   text-align: none;
   font-size: 70%;

}
div.header {
   text-align: center;

}
h1 {
   font-size: 200%;
   font-variant: small-caps;

}
div.authors {
   font-size: 110%;

}
div.subtitle {
   font-size: 110%;
   font-style: italic;
}
h2 {
   font-size: 180%;

}
h3 {
   font-size: 150%;

}
h4 {
   font-size: 130%;

}
h5 {
   font-size: 108%;

}
a {
   text-decoration: underline thin;
}
tt,code,pre {
   font-family: monospace;

}
div.figure,div.tablefigure {
   font-size: 90%;

}
.content body {
   font-family: serif;
   text-align: justify;
   font-size: 120%;

}
.content  {
   font-family: serif;
   text-align: justify;
   font-size: 120%;

}
.content div.header {
   text-align: center;

}
.content h1 {
   font-size: 200%;
   font-variant: small-caps;

}
.content div.authors {
   font-size: 110%;

}
.content div.subtitle {
   font-size: 110%;
   font-style: italic;
}
.content h2 {
   font-size: 180%;

}
.content h3 {
   font-size: 150%;

}
.content h4 {
   font-size: 130%;

}
.content h5 {
   font-size: 108%;

}
.content a {
   text-decoration: underline thin;
}
.content tt,code,pre {
   font-family: monospace;

}
.content div.figure,div.tablefigure {
   font-size: 90%;

}
div.header {
    text-align: center;
    border:  #07330A solid 7px;
    padding-top:    2.1em;
    padding-bottom: 2.05em;
    margin-bottom: 3em;
}
div.p {
    padding-bottom: 0em;
}
div.p + div.p { padding-top: 0.5em; }
body {overflow: auto;}
code,pre {overflow: auto}
blockquote {
    border-left: 2px solid #07330A;
    padding-left: 1em;
}
ul, ol {
    padding-top: 0em;
    padding-bottom: 0em;
    padding-left:  1.8em;
    margin-top: 0em;
    margin-bottom: 0em;
}
.dibrawimenudir { display: block; }
         ul  li.dibrawi_menuli {
           display: inline;
         } 
         ul.dibrawi_menuul {
           padding: 0em;
           margin: 0em;
           margin-left: 1em;
         }
.dibrawicomment:before { content:  "["; }
.dibrawicomment:after { content: "]"; }
.dibrawicomment {
    background-color: yellow;
    color: red;
}
table.tablefigure {
    margin-right:auto;
    margin-left: auto;
    border-collapse: collapse;
    min-width: 80%;
    margin-bottom: 1em;
}
caption.tablefigure {
    caption-side:bottom;
}
div.figure:after, caption.tablefigure:after { content: " [" attr(id) "]"; }
td, th {
    padding: 0.4em;
}
img {
    border: none;
    padding-bottom: 0.5em;
}div.figure, div.tablefigure {
    text-align: center;
    font-size:90%;
    border: thin #959595 solid;
    padding: 1ex;
    margin: 1em;
    width: 90%;
    margin-left: 5%;
    margin-right: 0em;
    clear: both;

}
small.notebegin { font-size: 70%; vertical-align: super; counter-increment: footnote; }
small.noteend { font-size: 70%; vertical-align: super; }
small.noteend:before {  content: counter(footnote) }
small.note:before { content: counter(footnote) ": " }
body { counter-reset: section subsection subsubsection footnote; }

small.note {
    font-size: 76%;
    clear: right;
    width: 40%;
    border: thin #959595 solid;
    float: right;
    margin: 0.5em;
    margin-right: 0em;
    padding: 0.5em;
}
h2 { border: #07330A solid 2px; padding: 0.2em; }
h3 { text-decoration: underline;}
pre {
    position: relative; left: 5%; width: 90%; clear: left;
}
div.leftside {
  left:  0.400000%; width: 18.000000%; padding: 0.900000%;
  border: #6A96B3 ridge 3px;
    top: 2px;
    position:fixed;
    overflow: auto;
    bottom: 2px;
}
div.rightside {
  right: 0.400000%; width: 18.000000%; padding: 0.900000%;
  border: #6A96B3 ridge 3px;
    top: 2px;
    position:fixed;
    overflow: auto;
    bottom: 2px;
}
div.content {
  left: 21.000000%; right: 21.000000%; padding: 0.900000%;
  border: #6A96B3 ridge 3px;
    top: 2px;
    position: absolute;
    text-align: justify;
}
</style>
<title>./examples/Formulae</title>
</head>
<body>
<div class="leftside">
<b>Page:</b> ./examples/Formulae <br/>
<hr/><b>Menu: </b><div class="p dibrawi_menup">
<ul class="dibrawi_menuul">
 <li class="dibrawi_menuli"> <div class="dibrawimenudir">examples 
<ul class="dibrawi_menuul">
 <li class="dibrawi_menuli"> <a href=".././examples/Blog.html" class="dibrawi_menua">Blog</a> </li>
<li class="dibrawi_menuli"> <a href=".././examples/Formulae.html" class="dibrawi_menua">Formulae</a> </li>
</ul>
</div> </li>
</ul>
 </div>

</div>
<div class="rightside">
<!-- Right Side Insertion -->
<hr/><b>Table of contents:</b><br/><div class="p dbwtocp">
<ol class="dbwtocol">
   <li class="dbwtocli">  <a href="#Main_Idea" class="dbwtoca">Main Idea</a>   </li>
<li class="dbwtocli">  <a href="#Example" class="dbwtoca">Example</a>   
<ol class="dbwtocol">
     <li class="dbwtocli">  <a href="#Defining_Expressions" class="dbwtoca">Defining Expressions</a>     </li>
<li class="dbwtocli">  <a href="#Using_Expressions_in_Target_Documents" class="dbwtoca">Using Expressions in Target Documents</a>     </li>
<li class="dbwtocli">  <a href="#Sample_Document" class="dbwtoca">Sample Document</a>     </li>
<li class="dbwtocli">  <a href="#Rendering_Results" class="dbwtoca">Rendering Results</a> </li>
</ol>
</li>
</ol>
</div>
<br/>
</div>
<div class="content">

<div class="header">

  <h1>Writing Math</h1>
</div> <!-- END HEADER -->
<div class="p">
   </div>
<h2 id="Main_Idea">Main Idea</h2>
<div class="p">  The idea is to use the module <tt>Mix.Math</tt> which uses the operators and constructors of <tt>Dibrawi_formula</tt>. </div>
<div class="p">  <a href="../../api/Dibrawi_formula.Library.html"><tt>Formula.Library</tt></a> </div>
<div class="p"> <a href="../../api/Dibrawi_formula.Constructors.html"><tt>Formula.Constructors</tt></a>   <span class="dibrawicomment">TODO: <i>explain a bit</i></span>  </div>
<h2 id="Example">Example</h2>
<div class="p">  </div>
<h3 id="Defining_Expressions">Defining Expressions</h3>
<div class="p">  Let's assemble the formulae and equations in a module, where we open the module <tt>Mix.Math</tt>: <div class="dbwmixcode"><pre>
module Improbability_drive = struct
  open Mix.Math
</pre></div>  We can there define any <i>expression</i> as an OCaml value, for example, variables <i>i</i> and <i>n</i>: <div class="dbwmixcode"><pre>
  let i = var "i"
  let n = var "StatesNb"
</pre></div> When we want special characters or operators which are not already provided by the embryo of library provided by <i>Dibrawi</i>, we may just define new ones: <tt>cvar &lt;latex&gt; &lt;text&gt; &lt;mathml&gt;</tt> for variables, <tt>bin &lt;latex&gt; &lt;text&gt; &lt;mathml&gt;</tt> for binary operators, etc.: <div class="dbwmixcode"><pre>
  let theta = cvar "\\theta" "θ" "&amp;#x3b8;"
  let oplus = bin "\\oplus" "⊕" "⊕"
</pre></div> It is just pure OCaml, why not define functions: <div class="dbwmixcode"><pre>
  let alpha_i i = sub (cvar "\\alpha" "α" "α") i
</pre></div> <tt>alpha_i (int 0)</tt> will be &ldquo;α<sub>0</sub>&rdquo;, <tt>alpha_i n</tt> will be &ldquo;α<sub>StatesNb</sub>&rdquo;, etc. </div>
<div class="p">  Then we may just assemble everything the way we want it, using operators and constructors: <div class="dbwmixcode"><pre>    
  let fxn = (app (var "f") [ var "x"; var "n"; ])
    
  let expr1 =
    (par (sum i (int 0) n (i * (int 42) * (int 17))))
    + 
    (app (var "sin") [theta])
    - 
    (par (int 0 / int 0))

  let eq1 = fxn != expr1
</pre></div> </div>
<div class="p">  The <i>common</i> operators <pre>
  let ( &lt;&lt; ) x y = y x 
  let ( &gt;&gt; ) x y = x y 
</pre> can be used to make any binary operator &ldquo;infix&rdquo;: <div class="dbwmixcode"><pre>        
  let expr2 =
    (par ((var "bouh") &lt;&lt;oplus&gt;&gt; (int 42)))
    /  
    (sup (alpha_i (int 0)) n)

  let expr3 =
    (par (theta &gt;= (int 42) || (alpha_i i == (float 0.1))))
    
  let bigexpr = expr2 / (par (frac (int 1) expr3))
</pre></div> </div>
<div class="p">  For presentation purposes, we can arrange everything inside &ldquo;arrays&rdquo; which are expected to be lists of lists (using the <tt>nil</tt> expression and <tt>nilbin &lt;binary operator&gt;</tt>): <div class="dbwmixcode"><pre>
  let array1 = [
    [ fxn; nilbin (!=); expr1 ];
    [ nil; nilbin (&gt;=); expr2 ];
    [ nil; nilbin (&lt;);  bigexpr ];
  ]
end
</pre></div> </div>
<h3 id="Using_Expressions_in_Target_Documents">Using Expressions in Target Documents</h3>
<div class="p">  For now we can only render with <tt>Math.inline</tt>, <tt>Math.block</tt>, and <tt>Math.array</tt> (numbered equations, matrices, etc. are in the TODO-list&nbsp;&hellip;). By default, formulae are rendered as Latex when outputting Latex, and as MathML when outputting HTML. But with <tt>Math.set_pref</tt> one can choose <tt>latex</tt>, <tt>text</tt>, or <tt>mathml</tt> (when the output format does not handle the preference, the formula is rendered as <tt>{code}</tt> which is safe but useless). Moreover, just saying <tt>Math.with_MathJax ()</tt> somewhere will add the call to  <a href="http://www.mathjax.org/docs/1.1/platforms/index.html">MathJax</a> to render MathML from an HTML document. </div>
<div class="p">   Here follows a sample document which uses the formulae defined above:  </div>
<h3 id="Sample_Document">Sample Document</h3>
<div class="p">      We can have math expression render &ldquo;in-line&rdquo;, like: <span class="dbwmixcode"><tt>&#8882;= Math.inline Improbability_drive.expr2&#8883;</tt></span>. We can also put them in a &ldquo;block&rdquo;: <span class="dbwmixcode"><tt>&#8882;= Math.block Improbability_drive.eq1 &#8883;</tt></span> Finally, we can render &ldquo;arrays&rdquo; of expressions which are nicely aligned: <span class="dbwmixcode"><tt>&#8882;= Math.array Improbability_drive.array1 &#8883;</tt></span> </div>
<div class="p"> </div>
<div class="p">  Of course one can define and render a formula at the same time: <div class="dbwmixcode"><pre>
let open Math in
var "E" == (var "M" * (var "C" ^ (int 2))) |&gt; block |&gt; pr
</pre></div>       </div>
<h3 id="Rendering_Results">Rendering Results</h3>
<div class="p">  The results are: 
<ul>
 <li> an <a href="../../example_math_text.html">HTML document</a> with the formulae rendered as pure text; </li>
<li> an <a href="../../example_math_mathml.html">HTML document</a> with the formulae rendered as MathML; </li>
<li> a <a href="../../example_math_latex.pdf">PDF document</a> with the formulae rendered as <i>normal</i> LaTeX. </li>
</ul>
       </div>

<div id="pagefoot" />
</div>
</body></html>
